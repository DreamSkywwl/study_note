# Point

+ [基本概念](#基本概念)
+ [指针的定义](#指针的定义)
    + [空指针](#空指针)
+ [指针的内容](#指针的内容)
    + [指针的内容访问](#指针的内容访问)
+ [指针的用法](#指针的用法)
+ [指针的运算](#指针的运算)
    + [比较大小](#比较大小)
    + [减法](#减法)
    + [加法](#加法)
+ [示例](#示例)
    + [访问int指针前一个字节](#访问int指针前一个字节)
    + [Demo](#Demo)

## 基本概念
+ 每个变量都被存放在某个内存地址(以字节为单位)开始的若干个字节中
+ “指针”，也称作“指针变量”，大小为4个字节(或8个字节，64位系统)的变量，其内容代表一个内存地址


## 指针的定义
类型名 * 指针变量名;

~~~ c
int   * p;     // p 是一个指针，变量p 的类型是 int *
char  * pc;    // pc是一个指针，变量pc的类型是 char *
float * pf;    // pf是一个指针，变量pf的类型是 float *
~~~

### 空指针
+ 地址0不能访问。指向地址0的指针就是空指针。
+ 可以用"NULL"关键字对任何类型的指针进行赋值。NULL实际上就是整数0，值为NULL的指针就是空指针。

~~~ c
int * pn = NULL;
char * pc = NULL;
int * p2 = 0;
// if(p)  ==> if(p != NULL)
// if(!p) ==> if(p == NULL)
~~~

## 指针的内容

int * p = (int *)40000;

p内容：

|进制|数值|
|:-:|:-:|
|十进制|40000|
|十六进制|0x9C40|
|C40二进制|0000 0000 0000 0000 1001 1100 0100 0000|

p指向地址40000，地址p就是地址40000

### 指针的内容访问

~~~ c
int * p =(int *) 40000;
// 往地址40000处起始的若干个字节的内存空间里写入5000
*p = 5000;
// 将地址40000处起始的若干字节的内容赋值给n
int n = *p;

//若干 == sizeof(int)，与指针类型一致
~~~

## 指针的用法

~~~ c
char ch1 = 'A';
char * pc = &ch1;  //使得pc指向变量ch1
* pc = 'B';        //使得ch1 = 'B'
char ch2 = * pc;   //使得ch2 = ch1
pc = &ch2;         //使得pc指向变量ch2
* pc = 'D';        //使得ch2 = 'D'
~~~

& : 取地址运算符
&x : 变量x的地址(即指向x的指针)
对于类型为T的变量x，&x 表示变量 x 的地址(即指向x德指针)
&x 的类型是 T *;

## 指针的运算

### 比较大小
+ 两个同类型的指针变量，可以比较大小

|||
|:-:|:-:|
|地址p1<地址p2|p1< p2 值为真|
|地址p1=地址p2|p1==p2 值为真|
|地址p1>地址p2|p1> p2 值为真|

### 减法
两个同类型的指针变量，可以相减

两个T * 类型的指针 p1和p2
p1 - p2 = (地址p1 - 地址p2)/sizeof(T)


~~~ c
int * p1 = (int *) 1000;
int * p2 = (int *) 600;
// p1 - p2 = (1000 - 600)/sizeof(int) = (1000 - 600)/4 = 100
~~~

### 加法

指针变量加减一个整数的结果是指针

p : T * 类型额指针
n ：整数类型的变量或常量

p + n : T * 类型的指针，指向地址： 地址p + n * sizeof(T)

+ [示例](#示例)
    + [访问int指针前一个字节](#访问int指针前一个字节)
## 示例

### 访问int指针前一个字节

+ 如何访问int性变量前面的那一个字节？

~~~ c
int a;
char * p = (char *) &a;// &a 是 int * 类型
--p
printf("%c",* p); //可能导致运行错误
* p = 'A'; //可能导致运行错误
~~~

### Demo

~~~ c
void point_base_demo()
{

    using namespace std;
    int *p1, *p2;
    int n = 4;
    char *pc1, *pc2;
    //地址p1为100
    p1 = (int *)100;
    //地址p2为100
    p2 = (int *)200;
    //输出 1) 25，因(200-100)/sizeof(int)=100/4=25
    cout << "1) " << p2 - p1 << endl;

    //地址pc1为100
    pc1 = (char *)p1;
    //地址pc2为200
    pc2 = (char *)p2;
    //输出 2) -100，因(100-200)/sizeof(char)=-100
    cout << "2) " << pc1 - pc2 << endl;
    //输出 3) 29
    cout << "3) " << (p2 + n) - p1 << endl;
    //p2 + n 是一个指针，可以用它给p3赋值
    int *p3 = p2 + n;
    // 输出 4) 29
    cout << "4) " << p3 - p1 << endl;
    //输出 5) 90
    cout << "5) " << (pc2 - 10) - pc1 << endl;
}
~~~
