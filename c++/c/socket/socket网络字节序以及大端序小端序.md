# socket网络字节序以及大端序小端序


不同CPU中，4字节整数1在内存空间的存储方式是不同的。4字节整数1可用2进制表示如下：

`00000000 00000000 00000000 00000001`

有些CPU以上面的顺序存储到内存，另外一些CPU则以倒序存储，如下所示：

`00000001 00000000 00000000 00000000`

若不考虑这些就收发数据会发生问题，因为保存顺序的不同意味着对接收数据的解析顺序也不同。

## 大端序和小端序

CPU向内存保存数据的方式有两种：
+ 大端序（Big Endian）：高位字节存放到低位地址（高位字节在前）。
+ 小端序（Little Endian）：高位字节存放到高位地址（低位字节在前）。

仅凭描述很难解释清楚，不妨来看一个实例。假设在 0x20 号开始的地址中保存4字节 int 型数据 0x12345678，大端序CPU保存方式如下图所示：

图1：整数 0x12345678 的大端序字节表示
|||||
|:-:|:-:|:-:|:-:|
|0x20号|0x21号|0x22号|0x23号|
|0x12|0x34|0x56|0x78|


对于大端序，最高位字节 0x12 存放到低位地址，最低位字节 0x78 存放到高位地址。小端序的保存方式如下图所示：
图2：整数 0x12345678 的小端序字节表示
|||||
|:-:|:-:|:-:|:-:|
|0x20号|0x21号|0x22号|0x23号|
|0x78|0x56|0x34|0x12|

`不同CPU保存和解析数据的方式不同（主流的Intel系列CPU为小端序），小端序系统和大端序系统通信时会发生数据解析错误。因此在发送数据前，要将数据转换为统一的格式——网络字节序（Network Byte Order）。网络字节序统一为大端序。`